version: 1.0.{build}-{branch}

skip_tags: true

image: Visual Studio 2017 

platform:
  - Any CPU

environment:
  OCTO_URL: https://cd.acceleratex.org/octopus
  OCTO_API_KEY:
    secure: A/6Iyybo2hmkKL8/9zmxdNoxHFneMWE0AK0J4f3Viyw=

test: off

cache:
    -  .\Sources\packages -> .\Sources\WiQuest\WIQuest.Web\packages.config
    -  .\tools -> .\tools\packages.config, .\setup.cake

build_script:
    - ps: .\build.ps1 -target "DevBuild" -configuration "Release"


# Override common settings
# Read: https://www.appveyor.com/blog/2017/08/01/sharing-configuration-between-branches-in-appveyor-yml/
for:
-
  branches:
    only:
      - /features?[/-]/
      - /dev(elop)?(ment)?$/
    
  build_script:
    - ps: .\build.ps1 -target "DevBuild" -configuration "Release"

-
  branches:
    only:
      - /hotfix(es)?[/-]/
      - /releases?[/-]/
    
  build_script:
    - ps: .\build.ps1 -target "KpiBuild" -configuration "Release"

-
  branches:
    only:
      - master

  skip_non_tags: true

-
  branches:
    only:
      - /.*/
    
  build_script:
    - ps: .\build.ps1 -target "DevBuild" -configuration "Debug"    














#notifications:
  #- provider: HipChat
    #auth_token:
      #secure: M5azVDnrp04fX9usXZVqdhcB/KGHrZ1Nv4GH+gu102w=
    #room: RPS-TestRoom
